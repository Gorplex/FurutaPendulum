<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>PolyDAQ: polydaq2 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PolyDAQ
   &#160;<span id="projectnumber">2.1</span>
   </div>
   <div id="projectbrief">Cal Poly ME Data Acquisition and Logging System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classpolydaq2-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">polydaq2 Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class which interacts with PolyDAQ 2 hardware.  
 <a href="classpolydaq2.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="polydaq2_8h_source.html">polydaq2.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ada78fa081faee4408043ed501b533805"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#ada78fa081faee4408043ed501b533805">polydaq2</a> (emstream *serpt)</td></tr>
<tr class="memdesc:ada78fa081faee4408043ed501b533805"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a PolyDAQ 2 interface object.  <a href="#ada78fa081faee4408043ed501b533805">More...</a><br/></td></tr>
<tr class="separator:ada78fa081faee4408043ed501b533805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae38297802b53115b68a219ee90a51397"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#ae38297802b53115b68a219ee90a51397">initialize</a> (void)</td></tr>
<tr class="memdesc:ae38297802b53115b68a219ee90a51397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize components which need to be set up after the RTOS is started.  <a href="#ae38297802b53115b68a219ee90a51397">More...</a><br/></td></tr>
<tr class="separator:ae38297802b53115b68a219ee90a51397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2b04215b8b00e05595c14e74b6c203c"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#ad2b04215b8b00e05595c14e74b6c203c">get_data</a> (char command)</td></tr>
<tr class="memdesc:ad2b04215b8b00e05595c14e74b6c203c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get and return raw data from one data channel.  <a href="#ad2b04215b8b00e05595c14e74b6c203c">More...</a><br/></td></tr>
<tr class="separator:ad2b04215b8b00e05595c14e74b6c203c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2525448837ee98187b453c31b2bd266"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#ab2525448837ee98187b453c31b2bd266">get_data_oversampled</a> (char command, uint8_t samples)</td></tr>
<tr class="memdesc:ab2525448837ee98187b453c31b2bd266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get and return oversampled raw data from one data channel.  <a href="#ab2525448837ee98187b453c31b2bd266">More...</a><br/></td></tr>
<tr class="separator:ab2525448837ee98187b453c31b2bd266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a957565a13f1ac71238b0c13ba7b107f9"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a957565a13f1ac71238b0c13ba7b107f9">strain_raw</a> (uint8_t channel)</td></tr>
<tr class="memdesc:a957565a13f1ac71238b0c13ba7b107f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a raw A/D reading from a strain gauge amplifier.  <a href="#a957565a13f1ac71238b0c13ba7b107f9">More...</a><br/></td></tr>
<tr class="separator:a957565a13f1ac71238b0c13ba7b107f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac35eb45623984ca51e96c805975824d0"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#ac35eb45623984ca51e96c805975824d0">strain_raw_oversampled</a> (uint8_t channel, uint8_t samples)</td></tr>
<tr class="memdesc:ac35eb45623984ca51e96c805975824d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an oversampled raw A/D reading from a strain gauge amplifier.  <a href="#ac35eb45623984ca51e96c805975824d0">More...</a><br/></td></tr>
<tr class="separator:ac35eb45623984ca51e96c805975824d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22fa21af6fa0be4017619f645d8ca8db"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a22fa21af6fa0be4017619f645d8ca8db">strain_auto_balance</a> (uint8_t channel, uint16_t desired_set=(ADC_MAX_OUTPUT/2))</td></tr>
<tr class="memdesc:a22fa21af6fa0be4017619f645d8ca8db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Automatically zero a strain gauge bridge using the D/A converter.  <a href="#a22fa21af6fa0be4017619f645d8ca8db">More...</a><br/></td></tr>
<tr class="separator:a22fa21af6fa0be4017619f645d8ca8db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a745e78c13d4fa3d7e9a8b2c54a80c34b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a745e78c13d4fa3d7e9a8b2c54a80c34b">strain_balancer_off</a> (void)</td></tr>
<tr class="memdesc:a745e78c13d4fa3d7e9a8b2c54a80c34b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn the D/A's which are used to balance the strain gauge bridges off.  <a href="#a745e78c13d4fa3d7e9a8b2c54a80c34b">More...</a><br/></td></tr>
<tr class="separator:a745e78c13d4fa3d7e9a8b2c54a80c34b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd57303eaefe880c0eeff769ab109f44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#afd57303eaefe880c0eeff769ab109f44">strain_balancer_on</a> (void)</td></tr>
<tr class="memdesc:afd57303eaefe880c0eeff769ab109f44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn the D/A's which are used to balance the strain gauge bridges on.  <a href="#afd57303eaefe880c0eeff769ab109f44">More...</a><br/></td></tr>
<tr class="separator:afd57303eaefe880c0eeff769ab109f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace01e1bcf0895f63052c2914b3965c50"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#ace01e1bcf0895f63052c2914b3965c50">voltage_raw</a> (uint8_t channel)</td></tr>
<tr class="memdesc:ace01e1bcf0895f63052c2914b3965c50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a raw voltage reading from the voltage amplifier.  <a href="#ace01e1bcf0895f63052c2914b3965c50">More...</a><br/></td></tr>
<tr class="separator:ace01e1bcf0895f63052c2914b3965c50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a624826a08c0819b15e2c3f37a1864e53"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a624826a08c0819b15e2c3f37a1864e53">temperature_raw</a> (uint8_t channel)</td></tr>
<tr class="memdesc:a624826a08c0819b15e2c3f37a1864e53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a raw temperature reading from a thermocouple amplifier.  <a href="#a624826a08c0819b15e2c3f37a1864e53">More...</a><br/></td></tr>
<tr class="separator:a624826a08c0819b15e2c3f37a1864e53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a087f1bcb158fa058560ff55d8defa039"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a087f1bcb158fa058560ff55d8defa039">read_ADC</a> (uint8_t channel)</td></tr>
<tr class="memdesc:a087f1bcb158fa058560ff55d8defa039"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the given channel from the A/D converter.  <a href="#a087f1bcb158fa058560ff55d8defa039">More...</a><br/></td></tr>
<tr class="separator:a087f1bcb158fa058560ff55d8defa039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89a98fa2fbc6959b4c9cfd828623d803"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a89a98fa2fbc6959b4c9cfd828623d803">set_DAC</a> (uint8_t channel, uint16_t value)</td></tr>
<tr class="memdesc:a89a98fa2fbc6959b4c9cfd828623d803"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the output of the given D/A channel to the given value.  <a href="#a89a98fa2fbc6959b4c9cfd828623d803">More...</a><br/></td></tr>
<tr class="separator:a89a98fa2fbc6959b4c9cfd828623d803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee8448f01c2acd373be480492e99a214"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#aee8448f01c2acd373be480492e99a214">get_prev_DAC_output</a> (uint8_t channel)</td></tr>
<tr class="memdesc:aee8448f01c2acd373be480492e99a214"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the value most recently sent to the given D/A channel.  <a href="#aee8448f01c2acd373be480492e99a214">More...</a><br/></td></tr>
<tr class="separator:aee8448f01c2acd373be480492e99a214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6431374db64f3bee17c417ce1904cd65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a6431374db64f3bee17c417ce1904cd65">init_SD_card_LED</a> (void)</td></tr>
<tr class="memdesc:a6431374db64f3bee17c417ce1904cd65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the SD card's LED to be used with PWM for fancy effects.  <a href="#a6431374db64f3bee17c417ce1904cd65">More...</a><br/></td></tr>
<tr class="separator:a6431374db64f3bee17c417ce1904cd65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a562843837eb728576876cfb4224b6b39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a562843837eb728576876cfb4224b6b39">set_SD_card_LED_brightness</a> (uint16_t brightness)</td></tr>
<tr class="memdesc:a562843837eb728576876cfb4224b6b39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the brightness of the SD card indicator LED.  <a href="#a562843837eb728576876cfb4224b6b39">More...</a><br/></td></tr>
<tr class="separator:a562843837eb728576876cfb4224b6b39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedf6a4bb904fe3e0dc8ad9b89c3cdc33"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#aedf6a4bb904fe3e0dc8ad9b89c3cdc33">get_accel</a> (uint8_t axis)</td></tr>
<tr class="memdesc:aedf6a4bb904fe3e0dc8ad9b89c3cdc33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read one channel of the PolyDAQ's accelerometer.  <a href="#aedf6a4bb904fe3e0dc8ad9b89c3cdc33">More...</a><br/></td></tr>
<tr class="separator:aedf6a4bb904fe3e0dc8ad9b89c3cdc33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7381f5d992f03cfaff21c5b88bb30c"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a4a7381f5d992f03cfaff21c5b88bb30c">get_ext_accel</a> (uint8_t channel)</td></tr>
<tr class="memdesc:a4a7381f5d992f03cfaff21c5b88bb30c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read one channel of an externally attached MMA8452Q accelerometer.  <a href="#a4a7381f5d992f03cfaff21c5b88bb30c">More...</a><br/></td></tr>
<tr class="separator:a4a7381f5d992f03cfaff21c5b88bb30c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada5828197e8746b385b6461d0a924d42"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ada5828197e8746b385b6461d0a924d42"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#ada5828197e8746b385b6461d0a924d42">set_accel_range</a> (mma8452q_range_t range)</td></tr>
<tr class="memdesc:ada5828197e8746b385b6461d0a924d42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the accelerometer's range to +/-2, +/-4, or +/-8 g's. <br/></td></tr>
<tr class="separator:ada5828197e8746b385b6461d0a924d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afac7f21b84a613f3aac3cd9f11a08654"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#afac7f21b84a613f3aac3cd9f11a08654">get_IR_temperature</a> (void)</td></tr>
<tr class="memdesc:afac7f21b84a613f3aac3cd9f11a08654"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the MLX90614 infrared thermometer for a temperature reading.  <a href="#afac7f21b84a613f3aac3cd9f11a08654">More...</a><br/></td></tr>
<tr class="separator:afac7f21b84a613f3aac3cd9f11a08654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42de5e039a7715870237630a2d7ba608"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a42de5e039a7715870237630a2d7ba608">scan_I2C_bus</a> (emstream *p_ser_pt)</td></tr>
<tr class="memdesc:a42de5e039a7715870237630a2d7ba608"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check all possible addresses on the I2C bus for sensors.  <a href="#a42de5e039a7715870237630a2d7ba608">More...</a><br/></td></tr>
<tr class="separator:a42de5e039a7715870237630a2d7ba608"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a073eef7409f849444cecfdfd862be831"><td class="memItemLeft" align="right" valign="top">simple_DAC *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a073eef7409f849444cecfdfd862be831">p_dac</a></td></tr>
<tr class="separator:a073eef7409f849444cecfdfd862be831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b12ada80e0c2fbf7608e6b804c4bb2b"><td class="memItemLeft" align="right" valign="top">adc_driver *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a3b12ada80e0c2fbf7608e6b804c4bb2b">p_adc</a></td></tr>
<tr class="separator:a3b12ada80e0c2fbf7608e6b804c4bb2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c9b43abd6589c0981eddd3d8a87ba9"><td class="memItemLeft" align="right" valign="top">emstream *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a08c9b43abd6589c0981eddd3d8a87ba9">p_serial</a></td></tr>
<tr class="separator:a08c9b43abd6589c0981eddd3d8a87ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29d5cd87fbe8d5f5092225260cbefe9c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a29d5cd87fbe8d5f5092225260cbefe9c"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a29d5cd87fbe8d5f5092225260cbefe9c">previous_DAC_output</a> [2]</td></tr>
<tr class="memdesc:a29d5cd87fbe8d5f5092225260cbefe9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The value most recently sent to each digital to analog channel. <br/></td></tr>
<tr class="separator:a29d5cd87fbe8d5f5092225260cbefe9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf5920486e0d72f42506220a5ba38082"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf5920486e0d72f42506220a5ba38082"></a>
i2c_master *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#abf5920486e0d72f42506220a5ba38082">p_i2c</a></td></tr>
<tr class="memdesc:abf5920486e0d72f42506220a5ba38082"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the I2C bus on the PolyDAQ board. <br/></td></tr>
<tr class="separator:abf5920486e0d72f42506220a5ba38082"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85ba73b5f25017de468d41790dc78579"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85ba73b5f25017de468d41790dc78579"></a>
mma8452q *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a85ba73b5f25017de468d41790dc78579">p_accel</a></td></tr>
<tr class="memdesc:a85ba73b5f25017de468d41790dc78579"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the MMA8452Q accelerometer on the board, if there is one. <br/></td></tr>
<tr class="separator:a85ba73b5f25017de468d41790dc78579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e71a76cf6b209fa6abcf0a3d984ce41"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2e71a76cf6b209fa6abcf0a3d984ce41"></a>
mma8452q *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolydaq2.html#a2e71a76cf6b209fa6abcf0a3d984ce41">p_ext_accel</a></td></tr>
<tr class="memdesc:a2e71a76cf6b209fa6abcf0a3d984ce41"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the extra external MMA8452Q accelerometer, if present. <br/></td></tr>
<tr class="separator:a2e71a76cf6b209fa6abcf0a3d984ce41"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class which interacts with PolyDAQ 2 hardware. </p>
<p>This class contains a set of utility functions which interact with the hardware on a PolyDAQ 2 board. This includes taking readings of voltage, temperature and strain; balancing the strain gauge bridges using the D/A converters; saving data on a MicroSD card; and other things which haven't been written yet. </p>

<p>Definition at line <a class="el" href="polydaq2_8h_source.html#l00145">145</a> of file <a class="el" href="polydaq2_8h_source.html">polydaq2.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ada78fa081faee4408043ed501b533805"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">polydaq2::polydaq2 </td>
          <td>(</td>
          <td class="paramtype">emstream *&#160;</td>
          <td class="paramname"><em>serpt</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a PolyDAQ 2 interface object. </p>
<p>This constructor creates a new PolyDAQ 2 driver object. It saves pointers and creates new analog to digital and digital to analog converter driver objects. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serpt</td><td>A pointer to a serial port that can be used for debugging (default: NULL, meaning no debugging messages will be sent). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00038">38</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00170">p_accel</a>, <a class="el" href="polydaq2_8h_source.html#l00156">p_adc</a>, <a class="el" href="polydaq2_8h_source.html#l00151">p_dac</a>, <a class="el" href="polydaq2_8h_source.html#l00173">p_ext_accel</a>, <a class="el" href="polydaq2_8h_source.html#l00167">p_i2c</a>, <a class="el" href="polydaq2_8h_source.html#l00161">p_serial</a>, <a class="el" href="polydaq2_8h_source.html#l00060">PDQ_EXT_MMA8452Q_ADDR</a>, <a class="el" href="polydaq2_8h_source.html#l00056">PDQ_MMA8452Q_ADDR</a>, and <a class="el" href="polydaq2_8h_source.html#l00229">set_DAC()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aedf6a4bb904fe3e0dc8ad9b89c3cdc33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t polydaq2::get_accel </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read one channel of the PolyDAQ's accelerometer. </p>
<p>This function reads one channel of the accelerometer, if one is present. If the PolyDAQ is configured not to use an accelerometer, this method returns zero. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The accelerometer channel to read: X = 0, Y = 1, and Z = 2 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The accelerometer reading from the given channel or 0 if there's no accelerometer </dd></dl>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00504">504</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00170">p_accel</a>.</p>

<p>Referenced by <a class="el" href="polydaq2_8cpp_source.html#l00105">get_data()</a>, and <a class="el" href="task__data__acq_8cpp_source.html#l00072">task_data_acq::run_daq_command()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2b04215b8b00e05595c14e74b6c203c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t polydaq2::get_data </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get and return raw data from one data channel. </p>
<p>This method acquires data from one of the available data channels and returns it. Channels may include an A/D converter, an accelerometer axis, or whatever other data source may be configured here. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>A one-character command such as <code>'6'</code> to get A/D channel 6 data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The raw data read from the given channel </dd></dl>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00105">105</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8cpp_source.html#l00504">get_accel()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00524">get_ext_accel()</a>, and <a class="el" href="polydaq2_8h_source.html#l00218">read_ADC()</a>.</p>

<p>Referenced by <a class="el" href="task__sd__daq_8cpp_source.html#l00064">task_sd_daq::acquire_sd_data()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00147">get_data_oversampled()</a>, <a class="el" href="task__user_8cpp_source.html#l00088">task_user::run()</a>, and <a class="el" href="task__data__acq_8cpp_source.html#l00072">task_data_acq::run_daq_command()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2525448837ee98187b453c31b2bd266"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t polydaq2::get_data_oversampled </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get and return oversampled raw data from one data channel. </p>
<p>Get and return raw data from one data channel.</p>
<p>This method acquires data from one of the available data channels and returns it. Channels may include an A/D converter, an accelerometer axis, or whatever other data source may be configured here. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>A one-character command such as <code>'6'</code> to get A/D channel 6 data </td></tr>
    <tr><td class="paramname">samples</td><td>The number of readings to average in the oversampling process </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The raw data read from the given channel </dd></dl>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00147">147</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8cpp_source.html#l00105">get_data()</a>.</p>

<p>Referenced by <a class="el" href="task__user_8cpp_source.html#l00088">task_user::run()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a7381f5d992f03cfaff21c5b88bb30c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t polydaq2::get_ext_accel </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read one channel of an externally attached MMA8452Q accelerometer. </p>
<p>This function reads one channel of the external accelerometer, if one is present. If the PolyDAQ is configured not to use an accelerometer or there is no external accelerometer connected, this method returns zero. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The accelerometer channel to read: x = 0, y = 1, and z = 2 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The accelerometer reading from the given channel or 0 if there's no accelerometer there </dd></dl>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00524">524</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00170">p_accel</a>, and <a class="el" href="polydaq2_8h_source.html#l00173">p_ext_accel</a>.</p>

<p>Referenced by <a class="el" href="polydaq2_8cpp_source.html#l00105">get_data()</a>.</p>

</div>
</div>
<a class="anchor" id="afac7f21b84a613f3aac3cd9f11a08654"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t polydaq2::get_IR_temperature </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query the MLX90614 infrared thermometer for a temperature reading. </p>
<p>If a Melexis MLX90614 infrared thermometer is present, this method will ask the sensor for a reading. </p>
<dl class="section return"><dt>Returns</dt><dd>The temperature measured by the IR sensor in the MLX90614. </dd></dl>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00541">541</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00167">p_i2c</a>, and <a class="el" href="polydaq2_8h_source.html#l00047">PDQ_MLX90614_ADDR</a>.</p>

<p>Referenced by <a class="el" href="task__user_8cpp_source.html#l00088">task_user::run()</a>.</p>

</div>
</div>
<a class="anchor" id="aee8448f01c2acd373be480492e99a214"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t polydaq2::get_prev_DAC_output </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the value most recently sent to the given D/A channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel, 1 or 2, whose output is to be returned </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="polydaq2_8h_source.html#l00238">238</a> of file <a class="el" href="polydaq2_8h_source.html">polydaq2.h</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00164">previous_DAC_output</a>.</p>

</div>
</div>
<a class="anchor" id="a6431374db64f3bee17c417ce1904cd65"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void polydaq2::init_SD_card_LED </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the SD card's LED to be used with PWM for fancy effects. </p>
<p>This method initializes the LED which is used to indicate SD card status (or to indicate something else if desired). The LED is connected to a timer and GPIO pin specified in constants that are given in <code><a class="el" href="polydaq2_8h.html" title="Headers for a class that drives the PolyDAQ 2 board&#39;s hardware. ">polydaq2.h</a></code>. </p>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00423">423</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00119">SD_CARD_LED_MAX_PWM</a>, <a class="el" href="polydaq2_8h_source.html#l00074">SD_LED_CLOCK</a>, <a class="el" href="polydaq2_8h_source.html#l00095">SD_LED_OC_INIT_FN</a>, <a class="el" href="polydaq2_8h_source.html#l00102">SD_LED_OC_PRNF</a>, <a class="el" href="polydaq2_8h_source.html#l00065">SD_LED_PIN</a>, <a class="el" href="polydaq2_8h_source.html#l00069">SD_LED_PORT</a>, <a class="el" href="polydaq2_8h_source.html#l00109">SD_LED_SET_DUTY</a>, <a class="el" href="polydaq2_8h_source.html#l00080">SD_LED_SOURCE</a>, <a class="el" href="polydaq2_8h_source.html#l00084">SD_LED_TIMER</a>, and <a class="el" href="polydaq2_8h_source.html#l00088">SD_LED_TIMER_CLOCK</a>.</p>

<p>Referenced by <a class="el" href="task__leds_8cpp_source.html#l00057">task_leds::run()</a>.</p>

</div>
</div>
<a class="anchor" id="ae38297802b53115b68a219ee90a51397"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void polydaq2::initialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize components which need to be set up after the RTOS is started. </p>
<p>This method sets up PolyDAQ 2 components which cannot be set up until the RTOS has been started. For example, and A/D converter and anything on the I2C bus can only be accessed with the RTOS running because a mutex is used to protect each such component and RTOS delays may be used in some code. </p>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00078">78</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00170">p_accel</a>, <a class="el" href="polydaq2_8h_source.html#l00173">p_ext_accel</a>, <a class="el" href="polydaq2_8h_source.html#l00167">p_i2c</a>, and <a class="el" href="polydaq2_8h_source.html#l00161">p_serial</a>.</p>

<p>Referenced by <a class="el" href="task__sd__daq_8cpp_source.html#l00098">task_sd_daq::run()</a>.</p>

</div>
</div>
<a class="anchor" id="a087f1bcb158fa058560ff55d8defa039"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t polydaq2::read_ADC </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the given channel from the A/D converter. </p>
<p>This method performs an A/D conversion on the given channel of the A/D converter, returning the raw binary number given by the A/D. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The A/D channel to be read, from 0 to 15 (internal STM32 voltage and temperature channels are not supported) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The raw binary number returned by the A/D when it read the voltage on the given channel </dd></dl>

<p>Definition at line <a class="el" href="polydaq2_8h_source.html#l00218">218</a> of file <a class="el" href="polydaq2_8h_source.html">polydaq2.h</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00156">p_adc</a>.</p>

<p>Referenced by <a class="el" href="polydaq2_8cpp_source.html#l00105">get_data()</a>.</p>

</div>
</div>
<a class="anchor" id="a42de5e039a7715870237630a2d7ba608"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void polydaq2::scan_I2C_bus </td>
          <td>(</td>
          <td class="paramtype">emstream *&#160;</td>
          <td class="paramname"><em>p_ser_pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check all possible addresses on the I2C bus for sensors. </p>
<p>This method calls the I2C's scan method, which prints a table of I2C bus addresses and whether a sensor has been found at each one. </p>

<p>Definition at line <a class="el" href="polydaq2_8h_source.html#l00269">269</a> of file <a class="el" href="polydaq2_8h_source.html">polydaq2.h</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00167">p_i2c</a>.</p>

<p>Referenced by <a class="el" href="task__user_8cpp_source.html#l00088">task_user::run()</a>.</p>

</div>
</div>
<a class="anchor" id="a89a98fa2fbc6959b4c9cfd828623d803"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void polydaq2::set_DAC </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the output of the given D/A channel to the given value. </p>
<p>This method calls the PolyDAQ 2's D/A converter driver, telling it to set the output of one of its channels to the requested value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The D/A channel whose output is to be set, 1 or 2 </td></tr>
    <tr><td class="paramname">value</td><td>The value to be put in the D/A's output buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="polydaq2_8h_source.html#l00229">229</a> of file <a class="el" href="polydaq2_8h_source.html">polydaq2.h</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00151">p_dac</a>, and <a class="el" href="polydaq2_8h_source.html#l00164">previous_DAC_output</a>.</p>

<p>Referenced by <a class="el" href="polydaq2_8cpp_source.html#l00038">polydaq2()</a>, <a class="el" href="task__user_8cpp_source.html#l00088">task_user::run()</a>, and <a class="el" href="polydaq2_8cpp_source.html#l00288">strain_auto_balance()</a>.</p>

</div>
</div>
<a class="anchor" id="a562843837eb728576876cfb4224b6b39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void polydaq2::set_SD_card_LED_brightness </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>brightness</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the brightness of the SD card indicator LED. </p>
<p>This method sets the brightness of the LED which is used as an indicator of SD card activity. This LED may be used as a general purpose indicator if the SD card is not used. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">brightness</td><td>The brightness at which the LED will shine, from <code>0</code> to <code>SD_CARD_LED_MAX_PWM</code> (which is usually 1000) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00482">482</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00119">SD_CARD_LED_MAX_PWM</a>, and <a class="el" href="polydaq2_8h_source.html#l00109">SD_LED_SET_DUTY</a>.</p>

<p>Referenced by <a class="el" href="task__leds_8h_source.html#l00068">task_leds::off()</a>, <a class="el" href="task__leds_8h_source.html#l00075">task_leds::on()</a>, and <a class="el" href="task__leds_8cpp_source.html#l00057">task_leds::run()</a>.</p>

</div>
</div>
<a class="anchor" id="a22fa21af6fa0be4017619f645d8ca8db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t polydaq2::strain_auto_balance </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>desired_set</em> = <code>(ADC_MAX_OUTPUT&#160;/&#160;2)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Automatically zero a strain gauge bridge using the D/A converter. </p>
<p>This method uses the D/A converter in the STM32 to balance ("zero") a strain gauge bridge. Each strain gauge bridge has a D/A converter output connected to one side through a large (20K nominal) resistor; the voltage from the D/A is used to tweak the bridge output so that the zero-strain reading is as specified in <code>desired_set</code>. A typical value for <code>desired_set</code> is 2047, which is half the full scale for a 12-bit A/D converter; such a zero setting allows positive and negative strains to be measured. It is assumed that strain is zero when this method is called. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The strain bridge channel to balance ("zero"), either 1 or 2 </td></tr>
    <tr><td class="paramname">desired_set</td><td>The A/D reading which is desired from the bridge amplifier when strain is zero (default value: ADC_MAX_OUTPUT / 2) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The zero-strain reading which was actually achieved; this may be slightly off the desired value if the system is noisy. If it isn't possible to balance the bridge, (-1) is returned </dd></dl>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00288">288</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00161">p_serial</a>, <a class="el" href="polydaq2_8h_source.html#l00229">set_DAC()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00267">strain_balance_retries</a>, <a class="el" href="polydaq2_8cpp_source.html#l00258">strain_balance_tolerance</a>, and <a class="el" href="polydaq2_8cpp_source.html#l00202">strain_raw_oversampled()</a>.</p>

<p>Referenced by <a class="el" href="task__user_8cpp_source.html#l00088">task_user::run()</a>, and <a class="el" href="task__data__acq_8cpp_source.html#l00072">task_data_acq::run_daq_command()</a>.</p>

</div>
</div>
<a class="anchor" id="a745e78c13d4fa3d7e9a8b2c54a80c34b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void polydaq2::strain_balancer_off </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn the D/A's which are used to balance the strain gauge bridges off. </p>
<p>This method deactivates the D/A converters attached to the strain gauge bridge and leaves the D/A pins set as analog inputs. This means that the pins float; they will not affect the voltage on the corners of the bridge. This setting saves a little bit of power. </p>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00231">231</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00151">p_dac</a>.</p>

</div>
</div>
<a class="anchor" id="afd57303eaefe880c0eeff769ab109f44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void polydaq2::strain_balancer_on </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn the D/A's which are used to balance the strain gauge bridges on. </p>
<p>This method reactivates the D/A;s attached to a strain gauge bridge after the D/A's were deactivated by a call to <code><a class="el" href="classpolydaq2.html#a745e78c13d4fa3d7e9a8b2c54a80c34b" title="Turn the D/A&#39;s which are used to balance the strain gauge bridges off. ">strain_balancer_off()</a></code>. </p>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00243">243</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00151">p_dac</a>.</p>

</div>
</div>
<a class="anchor" id="a957565a13f1ac71238b0c13ba7b107f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t polydaq2::strain_raw </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a raw A/D reading from a strain gauge amplifier. </p>
<p>This method gets an A/D reading from a channel connected to a strain gauge bridge amplifier on a PolyDAQ 2. The channels are connected as follows: </p>
<ul>
<li>Strain gauge bridge 1 - A/D channel 14, pin PC4 </li>
<li>Strain gauge bridge 2 - A/D channel 15, pin PC5 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The strain bridge channel to read, either 1 or 2 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The unscaled, uncalibrated A/D converter output for the given reading, or (-1) if the channel requested was invalid </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00171">171</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00156">p_adc</a>, and <a class="el" href="polydaq2_8h_source.html#l00161">p_serial</a>.</p>

</div>
</div>
<a class="anchor" id="ac35eb45623984ca51e96c805975824d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t polydaq2::strain_raw_oversampled </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get an oversampled raw A/D reading from a strain gauge amplifier. </p>
<p>This method takes a bunch of A/D readings from a channel connected to a strain gauge bridge amplifier on a PolyDAQ 2, then computes the average reading and returns it. The channels are connected as follows: </p>
<ul>
<li>Strain gauge bridge 1 - A/D channel 14, pin PC4 </li>
<li>Strain gauge bridge 2 - A/D channel 15, pin PC5 Oversampling is a conceptually simple way to provide low-pass filtering, usually used to reduce noise in measurements. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The strain bridge channel to read, either 1 or 2 </td></tr>
    <tr><td class="paramname">samples</td><td>The number of samples to take before computing the average. A maximum of </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The unscaled, uncalibrated A/D converter output for the given reading, or (-1) if the channel requested was invalid </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00202">202</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00156">p_adc</a>, and <a class="el" href="polydaq2_8h_source.html#l00161">p_serial</a>.</p>

<p>Referenced by <a class="el" href="polydaq2_8cpp_source.html#l00288">strain_auto_balance()</a>.</p>

</div>
</div>
<a class="anchor" id="a624826a08c0819b15e2c3f37a1864e53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t polydaq2::temperature_raw </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a raw temperature reading from a thermocouple amplifier. </p>
<p>This method returns the A/D output when the given thermocouple amplifier channel is read. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The thermocouple channel to be read, 1 or 2 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The unscaled, uncalibrated A/D converter output for the given reading </dd></dl>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00402">402</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00156">p_adc</a>, and <a class="el" href="polydaq2_8h_source.html#l00161">p_serial</a>.</p>

</div>
</div>
<a class="anchor" id="ace01e1bcf0895f63052c2914b3965c50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t polydaq2::voltage_raw </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a raw voltage reading from the voltage amplifier. </p>
<p>This method returns the output of the A/D converter when it reads the given voltage channel on the PolyDAQ 2. Voltage channels 1, 2, 3, and 4 on the circuit board are connected to A/D channels 10, 11, 12, and 13 on the microcontroller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel whose voltage is to be measured </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The unscaled, uncalibrated A/D converter output for the given channel or (-1) if something went terribly wrong </dd></dl>

<p>Definition at line <a class="el" href="polydaq2_8cpp_source.html#l00380">380</a> of file <a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a>.</p>

<p>References <a class="el" href="polydaq2_8h_source.html#l00156">p_adc</a>, and <a class="el" href="polydaq2_8h_source.html#l00161">p_serial</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3b12ada80e0c2fbf7608e6b804c4bb2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">adc_driver* polydaq2::p_adc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This pointer points to an A/D converter driver which is created by the PolyDAQ driver. </p>

<p>Definition at line <a class="el" href="polydaq2_8h_source.html#l00156">156</a> of file <a class="el" href="polydaq2_8h_source.html">polydaq2.h</a>.</p>

<p>Referenced by <a class="el" href="polydaq2_8cpp_source.html#l00038">polydaq2()</a>, <a class="el" href="polydaq2_8h_source.html#l00218">read_ADC()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00171">strain_raw()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00202">strain_raw_oversampled()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00402">temperature_raw()</a>, and <a class="el" href="polydaq2_8cpp_source.html#l00380">voltage_raw()</a>.</p>

</div>
</div>
<a class="anchor" id="a073eef7409f849444cecfdfd862be831"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">simple_DAC* polydaq2::p_dac</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This pointer allows access to a D/A converter driver created by the PolyDAQ driver. </p>

<p>Definition at line <a class="el" href="polydaq2_8h_source.html#l00151">151</a> of file <a class="el" href="polydaq2_8h_source.html">polydaq2.h</a>.</p>

<p>Referenced by <a class="el" href="polydaq2_8cpp_source.html#l00038">polydaq2()</a>, <a class="el" href="polydaq2_8h_source.html#l00229">set_DAC()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00231">strain_balancer_off()</a>, and <a class="el" href="polydaq2_8cpp_source.html#l00243">strain_balancer_on()</a>.</p>

</div>
</div>
<a class="anchor" id="a08c9b43abd6589c0981eddd3d8a87ba9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">emstream* polydaq2::p_serial</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This pointer points to a serial port which can be used for debugging. If left at <code>NULL</code>, debugging printouts won't take place. </p>

<p>Definition at line <a class="el" href="polydaq2_8h_source.html#l00161">161</a> of file <a class="el" href="polydaq2_8h_source.html">polydaq2.h</a>.</p>

<p>Referenced by <a class="el" href="polydaq2_8cpp_source.html#l00078">initialize()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00038">polydaq2()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00288">strain_auto_balance()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00171">strain_raw()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00202">strain_raw_oversampled()</a>, <a class="el" href="polydaq2_8cpp_source.html#l00402">temperature_raw()</a>, and <a class="el" href="polydaq2_8cpp_source.html#l00380">voltage_raw()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="polydaq2_8h_source.html">polydaq2.h</a></li>
<li><a class="el" href="polydaq2_8cpp_source.html">polydaq2.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 11 2015 12:43:10 for PolyDAQ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
