<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>PolyDAQ: task_pc Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PolyDAQ
   &#160;<span id="projectnumber">2.1</span>
   </div>
   <div id="projectbrief">Cal Poly ME Data Acquisition and Logging System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classtask__pc-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">task_pc Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Task for communication with the user or a PC based user interface.  
 <a href="classtask__pc.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="task__pc_8h_source.html">task_pc.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for task_pc:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classtask__pc.png" usemap="#task_pc_map" alt=""/>
  <map id="task_pc_map" name="task_pc_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af4f825f6eea2b0cb64fd5ea5944aae21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__pc.html#af4f825f6eea2b0cb64fd5ea5944aae21">task_pc</a> (const char *name, unsigned portBASE_TYPE prio, size_t stacked, emstream *serpt)</td></tr>
<tr class="memdesc:af4f825f6eea2b0cb64fd5ea5944aae21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a PC interface task object.  <a href="#af4f825f6eea2b0cb64fd5ea5944aae21">More...</a><br/></td></tr>
<tr class="separator:af4f825f6eea2b0cb64fd5ea5944aae21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13b52c6ffaf6fd24de7d0d003556d9c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__pc.html#a13b52c6ffaf6fd24de7d0d003556d9c1">run</a> (void)</td></tr>
<tr class="memdesc:a13b52c6ffaf6fd24de7d0d003556d9c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The run method that runs the thread which talks to a PC.  <a href="#a13b52c6ffaf6fd24de7d0d003556d9c1">More...</a><br/></td></tr>
<tr class="separator:a13b52c6ffaf6fd24de7d0d003556d9c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Task for communication with the user or a PC based user interface. </p>
<p>This task interacts with the user. User input, which may be input from another computer, such as a PC running interface software written in Python, Matlab(tm) or LabView(tm), is usually given as single character commands. The user interface responds with whatever the designer wishes to send to the user or other computer. The use of states is optional, unless this task implements the "vi" editor, in which case it's pretty much mandatory. </p>

<p>Definition at line <a class="el" href="task__pc_8h_source.html#l00051">51</a> of file <a class="el" href="task__pc_8h_source.html">task_pc.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af4f825f6eea2b0cb64fd5ea5944aae21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">task_pc::task_pc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned portBASE_TYPE&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>stacked</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">emstream *&#160;</td>
          <td class="paramname"><em>serpt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a PC interface task object. </p>
<p>This constructor calls its parent class's constructor to actually do the work of creating a PC interface task object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_name</td><td>A name for this task </td></tr>
    <tr><td class="paramname">prio</td><td>The priority at which this task will run (should be low) </td></tr>
    <tr><td class="paramname">stacked</td><td>The stack space to be used by the task (not much) </td></tr>
    <tr><td class="paramname">serpt</td><td>A pointer to a serial device on which debugging messages are shown </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="task__pc_8cpp_source.html#l00042">42</a> of file <a class="el" href="task__pc_8cpp_source.html">task_pc.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a13b52c6ffaf6fd24de7d0d003556d9c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_pc::run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The run method that runs the thread which talks to a PC. </p>
<h1><a class="anchor" id="cmd_codes"></a>
"Command Codes"</h1>
<p>The following structure is used for commands sent from the PC to the microcontroller: </p>
<table class="doxtable">
<tr>
<th>1 byte </th><th>0-4 bytes </th><th>1 byte  </th></tr>
<tr>
<td>command </td><td>data </td><td>checksum </td></tr>
</table>
<p>Commands: </p>
<ul>
<li>0 - F : No data : Send A/D reading from one channel, 0 through 15 </li>
<li>More to come...</li>
</ul>
<h1><a class="anchor" id="data_packets"></a>
"Data Packets"</h1>
<p>The following structure is used for data sent by the microcontroller to the PC: </p>
<ul>
<li>Packet header: Begin with a byte which is 0xAA </li>
<li>Time: 32-bit number containing milliseconds since program startup </li>
<li>Time per point: 32-bit number containing microseconds per reading set </li>
<li>Active channels: 16-bit bitmask, active channels being 1 </li>
<li>A/D data: 16-bit number; 4 MSB's 0000; other 12 bits have the data </li>
<li>CRC16 for packet </li>
<li>Others...?</li>
</ul>
<p>This method sets up the A/D converter, then waits for a signal to take data. Then it takes data and fills up a buffer with that data. </p>

<p>Definition at line <a class="el" href="task__pc_8cpp_source.html#l00082">82</a> of file <a class="el" href="task__pc_8cpp_source.html">task_pc.cpp</a>.</p>

<p>References <a class="el" href="main_8cpp_source.html#l00056">p_main_text_queue</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="task__pc_8h_source.html">task_pc.h</a></li>
<li><a class="el" href="task__pc_8cpp_source.html">task_pc.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 11 2015 12:43:10 for PolyDAQ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
