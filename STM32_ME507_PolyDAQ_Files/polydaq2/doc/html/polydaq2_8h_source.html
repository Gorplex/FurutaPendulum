<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>PolyDAQ: polydaq2.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PolyDAQ
   &#160;<span id="projectnumber">2.1</span>
   </div>
   <div id="projectbrief">Cal Poly ME Data Acquisition and Logging System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">polydaq2.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="polydaq2_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//**************************************************************************************</span><span class="comment"></span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/** @file    polydaq2.h</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  @brief   Headers for a class that drives the PolyDAQ 2 board&#39;s hardware.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  @details This file contains the headers for a class that interacts with the </span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *           hardware on a PolyDAQ 2 board. The hardware includes the STM32&#39;s A/D and</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *           D/A converters, an SD card for data logging, an LED used as a status</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *           indicator, and two serial ports (one USB and one Bluetooth). </span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *  Revisions:</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *    \li 09-03-2014 JRR Original file</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *  License:</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *      This file is copyright 2012 by JR Ridgely and released under the Lesser GNU </span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *      Public License, version 2. It intended for educational use only, but its use</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *      is not limited thereto. */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/*      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; </span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE </span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE </span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *      ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE </span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *      LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUEN-</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *      TIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS </span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *      OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER </span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *      CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, </span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *      OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE </span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *      OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//**************************************************************************************</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// This define prevents this .h file from being included multiple times in a .cpp file</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#ifndef _POLYDAQ2_H_</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _POLYDAQ2_H_</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;stm32f4xx_tim.h&quot;</span>                  <span class="comment">// Header for STM32F4 timer/counters</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;taskbase.h&quot;</span>                       <span class="comment">// Header for Cal Poly ME405 style tasks</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;adc_driver.h&quot;</span>                     <span class="comment">// Driver for the A/D converter</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;dac_driver.h&quot;</span>                     <span class="comment">// Driver for digital to analog converter</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;sdio_card.h&quot;</span>                      <span class="comment">// Header for SD card driver class</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;i2c_bitbang.h&quot;</span>                    <span class="comment">// Driver for I2C bus driver class</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;mma8452q.h&quot;</span>                       <span class="comment">// Driver for MMA8452Q accelerometers</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/** @brief   The I2C bus address of a Melexis MLX90614 IR thermometer, if present.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> *  @details This is the I2C bus address at which a Melexis MLX90614 passive IR</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> *           thermal sensor may be found, if one is present. The factory default</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> *           address is 0x5A.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#ac51434d0b11853a40baeec441286989e">   47</a></span>&#160;<span class="preprocessor">#define PDQ_MLX90614_ADDR      0x5A</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/** @brief   The I2C bus address of the MMA8452Q accelerometer, if one is present.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> *  @details This bus address must be left-shifted by one bit so that the read/write</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> *           bit can occupy the least significant bit. Therefore, an MMA8452Q will be</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> *           at address 0x3A if it is wired as shown for address 0x1D in the data </span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> *           sheets and at address 0x38 if wired as shown for 0x1C. If no MMA8452Q is</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> *           in use, just undefine this preprocessor variable. </span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#a259c1cd3b60e70a8317e3aa512079ca5">   56</a></span>&#160;<span class="preprocessor">#define PDQ_MMA8452Q_ADDR      0x38</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor"></span><span class="comment">// #undef PDQ_MMA8452Q_ADDR</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/// @brief   The I2C bus address of the external MMA8452Q accelerometer, if present.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#ab8d5ef2197c778d69ed911c8390528dd">   60</a></span>&#160;<span class="comment"></span><span class="preprocessor">#define PDQ_EXT_MMA8452Q_ADDR  0x3A</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">/** This constant is used to select the port pin used by the SD card indicator LED.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *  PolyDAQ 2.0 uses pin 9, while PolyDAQ 2.1 uses pin 8.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#ac7ebfe1cf01a403d6f4b29c0cff913cb">   65</a></span>&#160;<span class="keyword">const</span> uint16_t <a class="code" href="polydaq2_8h.html#ac7ebfe1cf01a403d6f4b29c0cff913cb">SD_LED_PIN</a> = GPIO_Pin_8;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">/** This definition specifies which GPIO port is used by the SD card indicator LED.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#a12147b124195f1d09b5515ac97c9321c">   69</a></span>&#160;<span class="preprocessor">#define SD_LED_PORT         GPIOB</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/** This definition specifies which clock is to be turned on to make the SD card LED&#39;s</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> *  GPIO port works.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#ae1dce24f32e7c75ee3219a7b9507b81a">   74</a></span>&#160;<span class="preprocessor">#define SD_LED_CLOCK        RCC_AHB1Periph_GPIOB</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/** This macro specifies the pin source used by the SD card indicator LED. It refers</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> *  to the pin number.  PolyDAQ 2.0 uses @c GPIO_PinSource9, while PolyDAQ 2.1 uses</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> *  @c GPIO_PinSource8. </span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#ae843151b838b64e5e7f077be17590745">   80</a></span>&#160;<span class="preprocessor">#define SD_LED_SOURCE       GPIO_PinSource8</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/** This macro specifies the timer used to create the LED for the SD card LED. </span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#a0a4b861b2995525a9032bd908adba36a">   84</a></span>&#160;<span class="preprocessor">#define SD_LED_TIMER        TIM4</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/** This macro specifies which timer clock is used for the SD card LED&#39;s PWM timer.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#a2c72ed6b023dbd3427419785e8d7a08e">   88</a></span>&#160;<span class="preprocessor">#define SD_LED_TIMER_CLOCK  RCC_APB1Periph_TIM4</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">/** This macro gives the name of the function used to enable the output compare for a</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> *  given PWM. The output number for the given timer is the number in the function </span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> *  name, so @c TIM_OC4Init means initialize output compare unit 4 for the timer.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> *  PolyDAQ 2.0 uses @c TIM_OC4Init and PolyDAQ 2.1 uses @c TIM_OC3Init.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#a7b787760d6b797d568a4b84a32daa0ab">   95</a></span>&#160;<span class="preprocessor">#define SD_LED_OC_INIT_FN   TIM_OC3Init</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">/** This macro specifies the name of the function which enables PWM preload for a</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> *  given PWM. The output number is the number in the function name, so </span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> *  @c TIM_OC4PreloadConfig means enable preloading of output compare 4 in the timer.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> *  PolyDAQ 2.0 uses output 4, while PolyDAQ 2.1 uses @c TIM_OC3PreloadConfig.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#a8e4ef92ddb9732c4b4b26142b1b1056b">  102</a></span>&#160;<span class="preprocessor">#define SD_LED_OC_PRNF      TIM_OC3PreloadConfig</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">/** This macro specifies the name of the function used to set the duty cycle of the</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> *  SD card LED. The number at the end of the function name is the number of the </span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> *  output for the given timer, so @c TIM_SetCompare4 sets the duty cycle of output </span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> *  number 4. That works for PolyDAQ 2.0, while PolyDAQ 2.1 needs @c TIM_SetCompare3.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#abd8fd07111d8f48b037456c2546d238f">  109</a></span>&#160;<span class="preprocessor">#define SD_LED_SET_DUTY     TIM_SetCompare3</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">/** @brief   The resolution of the SD card LED&#39;s PWM timer.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"> *  @details This constant specifies the number to which the SD card indicator LED&#39;s </span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"> *           PWM timer will count. The LED duty cycle, and thus brightness, is </span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"> *           specified as a number betwen 0 and this number. A higher number here</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"> *           gives a PWM whose duty cycle can be specified more precisely but which </span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"> *           runs more slowly with the same prescaler. </span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#a6b5dfd9b16ab526555cd7a70d8f3a996">  119</a></span>&#160;<span class="preprocessor">#define SD_CARD_LED_MAX_PWM 1000</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">/** @brief   The GPIO port used for the SD card sense bit.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#a22b47de89cfc0c0b0ee4dd26979d33c2">  124</a></span>&#160;<span class="preprocessor">#define SD_CRD_SNS_PORT     GPIOB</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor"></span><span class="comment"></span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/** @brief   The GPIO port bit used for the SD card sense switch.</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#a484dfe8157cd8b77be9f2559ca75ffba">  128</a></span>&#160;<span class="keyword">const</span> uint16_t <a class="code" href="polydaq2_8h.html#a484dfe8157cd8b77be9f2559ca75ffba">SD_CRD_SNS_PIN</a> = GPIO_Pin_4;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">/** @brief   The GPIO port clock used to make the SD card&#39;s card sense bit work. </span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="polydaq2_8h.html#aaf9b3362bd44fb9670ae18fe2db6b180">  132</a></span>&#160;<span class="preprocessor">#define SD_CRD_SNS_CLOCK    RCC_AHB1Periph_GPIOB</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">//=====================================================================================</span><span class="comment"></span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">/** @brief   Class which interacts with PolyDAQ 2 hardware. </span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> *  @details This class contains a set of utility functions which interact with the</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"> *           hardware on a PolyDAQ 2 board. This includes taking readings of voltage,</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"> *           temperature and strain; balancing the strain gauge bridges using the D/A</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"> *           converters; saving data on a MicroSD card; and other things which haven&#39;t</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"> *           been written yet. </span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classpolydaq2.html">  145</a></span>&#160;<span class="keyword">class </span><a class="code" href="classpolydaq2.html">polydaq2</a></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keyword">protected</span>:<span class="comment"></span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">    /** This pointer allows access to a D/A converter driver created by the PolyDAQ </span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">     *  driver.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="classpolydaq2.html#a073eef7409f849444cecfdfd862be831">  151</a></span>&#160;    simple_DAC* <a class="code" href="classpolydaq2.html#a073eef7409f849444cecfdfd862be831">p_dac</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">    /** This pointer points to an A/D converter driver which is created by the PolyDAQ</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">     *  driver.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="classpolydaq2.html#a3b12ada80e0c2fbf7608e6b804c4bb2b">  156</a></span>&#160;    adc_driver* <a class="code" href="classpolydaq2.html#a3b12ada80e0c2fbf7608e6b804c4bb2b">p_adc</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">    /** This pointer points to a serial port which can be used for debugging. If left</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">     *  at @c NULL, debugging printouts won&#39;t take place.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classpolydaq2.html#a08c9b43abd6589c0981eddd3d8a87ba9">  161</a></span>&#160;    emstream* <a class="code" href="classpolydaq2.html#a08c9b43abd6589c0981eddd3d8a87ba9">p_serial</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">    /// @brief   The value most recently sent to each digital to analog channel.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classpolydaq2.html#a29d5cd87fbe8d5f5092225260cbefe9c">  164</a></span>&#160;<span class="comment"></span>    uint16_t <a class="code" href="classpolydaq2.html#a29d5cd87fbe8d5f5092225260cbefe9c">previous_DAC_output</a>[2];</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">    /// @brief   A pointer to the I2C bus on the PolyDAQ board.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classpolydaq2.html#abf5920486e0d72f42506220a5ba38082">  167</a></span>&#160;<span class="comment"></span>    i2c_master* <a class="code" href="classpolydaq2.html#abf5920486e0d72f42506220a5ba38082">p_i2c</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">    /// @brief   A pointer to the MMA8452Q accelerometer on the board, if there is one.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classpolydaq2.html#a85ba73b5f25017de468d41790dc78579">  170</a></span>&#160;<span class="comment"></span>    mma8452q* <a class="code" href="classpolydaq2.html#a85ba73b5f25017de468d41790dc78579">p_accel</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">    /// @brief   A pointer to the extra external MMA8452Q accelerometer, if present.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="classpolydaq2.html#a2e71a76cf6b209fa6abcf0a3d984ce41">  173</a></span>&#160;<span class="comment"></span>    mma8452q* <a class="code" href="classpolydaq2.html#a2e71a76cf6b209fa6abcf0a3d984ce41">p_ext_accel</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// The constructor creates the PolyDAQ2 interface object</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="classpolydaq2.html#ada78fa081faee4408043ed501b533805">polydaq2</a> (emstream* serpt);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// Initialize components after FreeRTOS has begun running</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classpolydaq2.html#ae38297802b53115b68a219ee90a51397">initialize</a> (<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">    /// Get and return raw data from one data channel</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span>    int16_t <a class="code" href="classpolydaq2.html#ad2b04215b8b00e05595c14e74b6c203c">get_data</a> (<span class="keywordtype">char</span> command);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">    /// Get and return oversampled raw data from one data channel</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span>    int16_t <a class="code" href="classpolydaq2.html#ab2525448837ee98187b453c31b2bd266">get_data_oversampled</a> (<span class="keywordtype">char</span> command, uint8_t samples);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// Get a raw A/D reading from a strain gauge amplifier</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    int16_t <a class="code" href="classpolydaq2.html#a957565a13f1ac71238b0c13ba7b107f9">strain_raw</a> (uint8_t channel);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">// Get a strain gauge amplifier reading oversampled by a number of times</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    int16_t <a class="code" href="classpolydaq2.html#ac35eb45623984ca51e96c805975824d0">strain_raw_oversampled</a> (uint8_t channel, uint8_t samples);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">// Automatically zero a strain gauge bridge using the D/A converter</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    int16_t <a class="code" href="classpolydaq2.html#a22fa21af6fa0be4017619f645d8ca8db">strain_auto_balance</a> (uint8_t channel, </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                                 uint16_t desired_set = (ADC_MAX_OUTPUT / 2));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">// Deactivate the strain balancer by turning the D/A&#39;s off</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classpolydaq2.html#a745e78c13d4fa3d7e9a8b2c54a80c34b">strain_balancer_off</a> (<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// Reactivate the strain balancer by turning the D/A&#39;s on</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classpolydaq2.html#afd57303eaefe880c0eeff769ab109f44">strain_balancer_on</a> (<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// Get a raw voltage reading from the voltage amplifier</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    int16_t <a class="code" href="classpolydaq2.html#ace01e1bcf0895f63052c2914b3965c50">voltage_raw</a> (uint8_t channel);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// Get a raw temperature reading from a thermocouple amplifier</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    int16_t <a class="code" href="classpolydaq2.html#a624826a08c0819b15e2c3f37a1864e53">temperature_raw</a> (uint8_t channel);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">    /** @brief   Read the given channel from the A/D converter.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">     *  @details This method performs an A/D conversion on the given channel of the </span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">     *           A/D converter, returning the raw binary number given by the A/D.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">     *  @param   channel The A/D channel to be read, from 0 to 15 (internal STM32</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">     *           voltage and temperature channels are not supported)</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">     *  @return  The raw binary number returned by the A/D when it read the voltage</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">     *           on the given channel</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="classpolydaq2.html#a087f1bcb158fa058560ff55d8defa039">  218</a></span>&#160;    int16_t <a class="code" href="classpolydaq2.html#a087f1bcb158fa058560ff55d8defa039">read_ADC</a> (uint8_t channel)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="classpolydaq2.html#a3b12ada80e0c2fbf7608e6b804c4bb2b">p_adc</a>-&gt;read_once (channel));</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">    /** @brief   Set the output of the given D/A channel to the given value.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">     *  @details This method calls the PolyDAQ 2&#39;s D/A converter driver, telling it to</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">     *           set the output of one of its channels to the requested value.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">     *  @param   channel The D/A channel whose output is to be set, 1 or 2</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">     *  @param   value The value to be put in the D/A&#39;s output buffer</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="classpolydaq2.html#a89a98fa2fbc6959b4c9cfd828623d803">  229</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classpolydaq2.html#a89a98fa2fbc6959b4c9cfd828623d803">set_DAC</a> (uint8_t channel, uint16_t value)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="classpolydaq2.html#a073eef7409f849444cecfdfd862be831">p_dac</a>-&gt;put (channel, value);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="classpolydaq2.html#a29d5cd87fbe8d5f5092225260cbefe9c">previous_DAC_output</a>[channel-1] = value;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">    /** @brief   Get the value most recently sent to the given D/A channel.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">     *  @param   channel The channel, 1 or 2, whose output is to be returned</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classpolydaq2.html#aee8448f01c2acd373be480492e99a214">  238</a></span>&#160;    uint16_t <a class="code" href="classpolydaq2.html#aee8448f01c2acd373be480492e99a214">get_prev_DAC_output</a> (uint8_t channel)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="classpolydaq2.html#a29d5cd87fbe8d5f5092225260cbefe9c">previous_DAC_output</a>[channel-1]);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// Initialize the SD card&#39;s LED to be used with PWM for fancy effects</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classpolydaq2.html#a6431374db64f3bee17c417ce1904cd65">init_SD_card_LED</a> (<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// Set the brightness of the SD card indicator LED</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classpolydaq2.html#a562843837eb728576876cfb4224b6b39">set_SD_card_LED_brightness</a> (uint16_t brightness);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// Get a reading from one of the accelerometer&#39;s axes</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    int16_t <a class="code" href="classpolydaq2.html#aedf6a4bb904fe3e0dc8ad9b89c3cdc33">get_accel</a> (uint8_t axis);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// Get an acceleration reading from the external accelerometer</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    int16_t <a class="code" href="classpolydaq2.html#a4a7381f5d992f03cfaff21c5b88bb30c">get_ext_accel</a> (uint8_t channel);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">    /** @brief   Set the accelerometer&#39;s range to +/-2, +/-4, or +/-8 g&#39;s.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="classpolydaq2.html#ada5828197e8746b385b6461d0a924d42">  257</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classpolydaq2.html#ada5828197e8746b385b6461d0a924d42">set_accel_range</a> (mma8452q_range_t range)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="classpolydaq2.html#a85ba73b5f25017de468d41790dc78579">p_accel</a>-&gt;set_range (range);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// Query the Melexis MLX90614 infrared thermometer for a temperature reading</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    uint16_t <a class="code" href="classpolydaq2.html#afac7f21b84a613f3aac3cd9f11a08654">get_IR_temperature</a> (<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">    /** @brief   Check all possible addresses on the I2C bus for sensors.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">     *  @details This method calls the I2C&#39;s scan method, which prints a table of I2C</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">     *           bus addresses and whether a sensor has been found at each one.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classpolydaq2.html#a42de5e039a7715870237630a2d7ba608">  269</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classpolydaq2.html#a42de5e039a7715870237630a2d7ba608">scan_I2C_bus</a> (emstream* p_ser_pt)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="classpolydaq2.html#abf5920486e0d72f42506220a5ba38082">p_i2c</a>-&gt;scan (p_ser_pt);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;};</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">//=====================================================================================</span><span class="comment"></span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">/** @mainpage </span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"> *  @image html polydaq_logo_4s.png</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"> *  @section Introduction</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> *      PolyDAQ is a customizable, embeddable data acquisition device for educational </span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"> *      use. It was originally designed for use in the Cal Poly Mechanical Engineering</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"> *      Thermal Laboratory, but it has been improved with the intention that it will </span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"> *      be usable for many different applications. It can function as a data </span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"> *      acquisition card for a small computer or a standalone datalogger.  All hardware</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"> *      and software is open source.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"> *  @section Links</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"> *      @li @subpage pd_setup For PolyDAQ setup of power and data connections</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment"> *      @li @subpage pd_sensors For information about how to connect various types of</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"> *          sensors</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"> *      @li @subpage pd_channels For tables which show the commands used to access the</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"> *          data channels on each PolyDAQ 2 board version</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"> *      @li @subpage pd_py_gui For a user guide to operating the PolyDAQ GUI, which </span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"> *          runs on Windows&lt;sup&gt;TM&lt;/sup&gt;, Mac&lt;sup&gt;TM&lt;/sup&gt;, and Linux&lt;sup&gt;TM&lt;/sup&gt;</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"> *          computers. </span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"> *  @section Sensors</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"> *      PolyDAQ&#39;s hardware features include thermocouple, voltage, strain, and </span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"> *      acceleration inputs. Although traces are present on the board to accommodate </span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"> *      all of these features, some features may be left off an individual board to </span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"> *      save money and electric power. In addition, several versions of PolyDAQ have</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"> *      the same processor and run the same software but are equipped with different</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"> *      sets of sensors: </span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"> *      @li Four thermocouple inputs, using AD8494 or AD8495 thermocouple signal </span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"> *          conditioners for linear amplification and cold junction compensation.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"> *      @li Four voltage inputs.  Some voltage inputs use a moderately high input </span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"> *          resistance voltage divider and an op-amp voltage follower with level </span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"> *          shifter to allow an input range of -10 to +10 volts. This scheme is similar</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment"> *          to that used in other low-cost DAQ devices such as the USB-600X series </span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"> *          from National Instruments(tm). Other voltage inputs can be set up without</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"> *          voltage dividers to give 0-3.3V full-scale measurements. The A/D converters</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"> *          use a precision 3.3V reference for accuracy.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"> *      @li Up to four strain gauge bridge amplifiers whose INA122 instrumentation </span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment"> *          amplifiers allow resolution down to the microstrain in typical Wheatstone </span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"> *          bridge applications.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"> *  @section Components</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"> *      Basic components common to all PolyDAQ 2&#39;s include the following: </span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"> *      @li An STM32F4 microcontroller which controls the data acquisition process and</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"> *          communicates with a PC (if used). </span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"> *      @li A USB-serial interface which can supply power to the board through the USB</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"> *          cable as well as communicate between the PolyDAQ and the computer.  Power </span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"> *          can also be supplied as 5 - 12 volts DC through a standard barrel jack.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"> *      @li A Bluetooth serial modem for wireless communication with laptops, tablets, </span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> *          or phones (if installed). </span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"> *      @li A micro-SD card socket. SD cards of up to around 32GB capacity can be used, </span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> *          and data is stored in files using the old DOS low-level format. CSV text </span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> *          files are the standard file format, but other file formats can be utilized</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"> *          with small changes to the firmware. Using SDIO card access rather than the </span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"> *          slower SPI protocol, data has been saved at up to 36KB/s in tests so far, </span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"> *          and we expect speed improvements as the software is refined.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"> *      @li Programmability (to flash updated firmware) through a 6-pin STLink2 connector.</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"> *  @section Firmware</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"> *      The PolyDAQ firmware is based on the STM32 Standard Peripheral Library and </span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"> *      FreeRTOS.  This software was chosen for its compatibility with software used </span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"> *      in Cal Poly ME mechatronics courses, which was in turn selected as the </span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"> *      preferred RTOS environment for educational use.  FreeRTOS isn&#39;t known as an </span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"> *      especially high performance RTOS, but its internal structure is more easily </span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"> *      understood than those of many competing products - multithreading and device </span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"> *      access are not as hidden from the application programmer as in many other </span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"> *      RTOSes, so students can learn more about many important fundamentals.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"> *      Performance is not that much of an issue, especially when we have an STM32F4</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"> *      processor which runs at 168 MHz and has hardware floating point support. </span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment"> *      GUI applications are being written for use on major PC operating systems </span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"> *      (Linux, Mac&lt;sup&gt;TM&lt;/sup&gt;, Windows&lt;sup&gt;TM&lt;/sup&gt;) and if we have good luck in </span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment"> *      porting, Android&lt;sup&gt;TM&lt;/sup&gt;.  The applications are written in Python and </span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"> *      use the Qt GUI libraries, NumPy, and PyQwt.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"> *  @section Version</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> *      This page documents PolyDAQ Version 2.1.  As of this writing (March 2015), </span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"> *      PolyDAQ 2 is a work in progress.  Prototypes have been made and are undergoing</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"> *      testing, and a production run of a dozen or so boards is being produced. </span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="preprocessor">#endif // _POLYDAQ2_H_</span></div>
<div class="ttc" id="classpolydaq2_html_aedf6a4bb904fe3e0dc8ad9b89c3cdc33"><div class="ttname"><a href="classpolydaq2.html#aedf6a4bb904fe3e0dc8ad9b89c3cdc33">polydaq2::get_accel</a></div><div class="ttdeci">int16_t get_accel(uint8_t axis)</div><div class="ttdoc">Read one channel of the PolyDAQ&#39;s accelerometer. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00504">polydaq2.cpp:504</a></div></div>
<div class="ttc" id="classpolydaq2_html_a89a98fa2fbc6959b4c9cfd828623d803"><div class="ttname"><a href="classpolydaq2.html#a89a98fa2fbc6959b4c9cfd828623d803">polydaq2::set_DAC</a></div><div class="ttdeci">void set_DAC(uint8_t channel, uint16_t value)</div><div class="ttdoc">Set the output of the given D/A channel to the given value. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00229">polydaq2.h:229</a></div></div>
<div class="ttc" id="classpolydaq2_html_abf5920486e0d72f42506220a5ba38082"><div class="ttname"><a href="classpolydaq2.html#abf5920486e0d72f42506220a5ba38082">polydaq2::p_i2c</a></div><div class="ttdeci">i2c_master * p_i2c</div><div class="ttdoc">A pointer to the I2C bus on the PolyDAQ board. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00167">polydaq2.h:167</a></div></div>
<div class="ttc" id="classpolydaq2_html_ac35eb45623984ca51e96c805975824d0"><div class="ttname"><a href="classpolydaq2.html#ac35eb45623984ca51e96c805975824d0">polydaq2::strain_raw_oversampled</a></div><div class="ttdeci">int16_t strain_raw_oversampled(uint8_t channel, uint8_t samples)</div><div class="ttdoc">Get an oversampled raw A/D reading from a strain gauge amplifier. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00202">polydaq2.cpp:202</a></div></div>
<div class="ttc" id="polydaq2_8h_html_a484dfe8157cd8b77be9f2559ca75ffba"><div class="ttname"><a href="polydaq2_8h.html#a484dfe8157cd8b77be9f2559ca75ffba">SD_CRD_SNS_PIN</a></div><div class="ttdeci">const uint16_t SD_CRD_SNS_PIN</div><div class="ttdoc">The GPIO port bit used for the SD card sense switch. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00128">polydaq2.h:128</a></div></div>
<div class="ttc" id="polydaq2_8h_html_ac7ebfe1cf01a403d6f4b29c0cff913cb"><div class="ttname"><a href="polydaq2_8h.html#ac7ebfe1cf01a403d6f4b29c0cff913cb">SD_LED_PIN</a></div><div class="ttdeci">const uint16_t SD_LED_PIN</div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00065">polydaq2.h:65</a></div></div>
<div class="ttc" id="classpolydaq2_html_a624826a08c0819b15e2c3f37a1864e53"><div class="ttname"><a href="classpolydaq2.html#a624826a08c0819b15e2c3f37a1864e53">polydaq2::temperature_raw</a></div><div class="ttdeci">int16_t temperature_raw(uint8_t channel)</div><div class="ttdoc">Get a raw temperature reading from a thermocouple amplifier. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00402">polydaq2.cpp:402</a></div></div>
<div class="ttc" id="classpolydaq2_html_ace01e1bcf0895f63052c2914b3965c50"><div class="ttname"><a href="classpolydaq2.html#ace01e1bcf0895f63052c2914b3965c50">polydaq2::voltage_raw</a></div><div class="ttdeci">int16_t voltage_raw(uint8_t channel)</div><div class="ttdoc">Get a raw voltage reading from the voltage amplifier. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00380">polydaq2.cpp:380</a></div></div>
<div class="ttc" id="classpolydaq2_html"><div class="ttname"><a href="classpolydaq2.html">polydaq2</a></div><div class="ttdoc">Class which interacts with PolyDAQ 2 hardware. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00145">polydaq2.h:145</a></div></div>
<div class="ttc" id="classpolydaq2_html_a4a7381f5d992f03cfaff21c5b88bb30c"><div class="ttname"><a href="classpolydaq2.html#a4a7381f5d992f03cfaff21c5b88bb30c">polydaq2::get_ext_accel</a></div><div class="ttdeci">int16_t get_ext_accel(uint8_t channel)</div><div class="ttdoc">Read one channel of an externally attached MMA8452Q accelerometer. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00524">polydaq2.cpp:524</a></div></div>
<div class="ttc" id="classpolydaq2_html_ad2b04215b8b00e05595c14e74b6c203c"><div class="ttname"><a href="classpolydaq2.html#ad2b04215b8b00e05595c14e74b6c203c">polydaq2::get_data</a></div><div class="ttdeci">int16_t get_data(char command)</div><div class="ttdoc">Get and return raw data from one data channel. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00105">polydaq2.cpp:105</a></div></div>
<div class="ttc" id="classpolydaq2_html_a2e71a76cf6b209fa6abcf0a3d984ce41"><div class="ttname"><a href="classpolydaq2.html#a2e71a76cf6b209fa6abcf0a3d984ce41">polydaq2::p_ext_accel</a></div><div class="ttdeci">mma8452q * p_ext_accel</div><div class="ttdoc">A pointer to the extra external MMA8452Q accelerometer, if present. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00173">polydaq2.h:173</a></div></div>
<div class="ttc" id="classpolydaq2_html_a562843837eb728576876cfb4224b6b39"><div class="ttname"><a href="classpolydaq2.html#a562843837eb728576876cfb4224b6b39">polydaq2::set_SD_card_LED_brightness</a></div><div class="ttdeci">void set_SD_card_LED_brightness(uint16_t brightness)</div><div class="ttdoc">Set the brightness of the SD card indicator LED. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00482">polydaq2.cpp:482</a></div></div>
<div class="ttc" id="classpolydaq2_html_a85ba73b5f25017de468d41790dc78579"><div class="ttname"><a href="classpolydaq2.html#a85ba73b5f25017de468d41790dc78579">polydaq2::p_accel</a></div><div class="ttdeci">mma8452q * p_accel</div><div class="ttdoc">A pointer to the MMA8452Q accelerometer on the board, if there is one. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00170">polydaq2.h:170</a></div></div>
<div class="ttc" id="classpolydaq2_html_a745e78c13d4fa3d7e9a8b2c54a80c34b"><div class="ttname"><a href="classpolydaq2.html#a745e78c13d4fa3d7e9a8b2c54a80c34b">polydaq2::strain_balancer_off</a></div><div class="ttdeci">void strain_balancer_off(void)</div><div class="ttdoc">Turn the D/A&#39;s which are used to balance the strain gauge bridges off. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00231">polydaq2.cpp:231</a></div></div>
<div class="ttc" id="classpolydaq2_html_ab2525448837ee98187b453c31b2bd266"><div class="ttname"><a href="classpolydaq2.html#ab2525448837ee98187b453c31b2bd266">polydaq2::get_data_oversampled</a></div><div class="ttdeci">int16_t get_data_oversampled(char command, uint8_t samples)</div><div class="ttdoc">Get and return oversampled raw data from one data channel. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00147">polydaq2.cpp:147</a></div></div>
<div class="ttc" id="classpolydaq2_html_a22fa21af6fa0be4017619f645d8ca8db"><div class="ttname"><a href="classpolydaq2.html#a22fa21af6fa0be4017619f645d8ca8db">polydaq2::strain_auto_balance</a></div><div class="ttdeci">int16_t strain_auto_balance(uint8_t channel, uint16_t desired_set=(ADC_MAX_OUTPUT/2))</div><div class="ttdoc">Automatically zero a strain gauge bridge using the D/A converter. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00288">polydaq2.cpp:288</a></div></div>
<div class="ttc" id="classpolydaq2_html_a29d5cd87fbe8d5f5092225260cbefe9c"><div class="ttname"><a href="classpolydaq2.html#a29d5cd87fbe8d5f5092225260cbefe9c">polydaq2::previous_DAC_output</a></div><div class="ttdeci">uint16_t previous_DAC_output[2]</div><div class="ttdoc">The value most recently sent to each digital to analog channel. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00164">polydaq2.h:164</a></div></div>
<div class="ttc" id="classpolydaq2_html_a3b12ada80e0c2fbf7608e6b804c4bb2b"><div class="ttname"><a href="classpolydaq2.html#a3b12ada80e0c2fbf7608e6b804c4bb2b">polydaq2::p_adc</a></div><div class="ttdeci">adc_driver * p_adc</div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00156">polydaq2.h:156</a></div></div>
<div class="ttc" id="classpolydaq2_html_a6431374db64f3bee17c417ce1904cd65"><div class="ttname"><a href="classpolydaq2.html#a6431374db64f3bee17c417ce1904cd65">polydaq2::init_SD_card_LED</a></div><div class="ttdeci">void init_SD_card_LED(void)</div><div class="ttdoc">Initialize the SD card&#39;s LED to be used with PWM for fancy effects. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00423">polydaq2.cpp:423</a></div></div>
<div class="ttc" id="classpolydaq2_html_a087f1bcb158fa058560ff55d8defa039"><div class="ttname"><a href="classpolydaq2.html#a087f1bcb158fa058560ff55d8defa039">polydaq2::read_ADC</a></div><div class="ttdeci">int16_t read_ADC(uint8_t channel)</div><div class="ttdoc">Read the given channel from the A/D converter. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00218">polydaq2.h:218</a></div></div>
<div class="ttc" id="classpolydaq2_html_a08c9b43abd6589c0981eddd3d8a87ba9"><div class="ttname"><a href="classpolydaq2.html#a08c9b43abd6589c0981eddd3d8a87ba9">polydaq2::p_serial</a></div><div class="ttdeci">emstream * p_serial</div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00161">polydaq2.h:161</a></div></div>
<div class="ttc" id="classpolydaq2_html_a073eef7409f849444cecfdfd862be831"><div class="ttname"><a href="classpolydaq2.html#a073eef7409f849444cecfdfd862be831">polydaq2::p_dac</a></div><div class="ttdeci">simple_DAC * p_dac</div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00151">polydaq2.h:151</a></div></div>
<div class="ttc" id="classpolydaq2_html_ada78fa081faee4408043ed501b533805"><div class="ttname"><a href="classpolydaq2.html#ada78fa081faee4408043ed501b533805">polydaq2::polydaq2</a></div><div class="ttdeci">polydaq2(emstream *serpt)</div><div class="ttdoc">Create a PolyDAQ 2 interface object. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00038">polydaq2.cpp:38</a></div></div>
<div class="ttc" id="classpolydaq2_html_afd57303eaefe880c0eeff769ab109f44"><div class="ttname"><a href="classpolydaq2.html#afd57303eaefe880c0eeff769ab109f44">polydaq2::strain_balancer_on</a></div><div class="ttdeci">void strain_balancer_on(void)</div><div class="ttdoc">Turn the D/A&#39;s which are used to balance the strain gauge bridges on. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00243">polydaq2.cpp:243</a></div></div>
<div class="ttc" id="classpolydaq2_html_ae38297802b53115b68a219ee90a51397"><div class="ttname"><a href="classpolydaq2.html#ae38297802b53115b68a219ee90a51397">polydaq2::initialize</a></div><div class="ttdeci">void initialize(void)</div><div class="ttdoc">Initialize components which need to be set up after the RTOS is started. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00078">polydaq2.cpp:78</a></div></div>
<div class="ttc" id="classpolydaq2_html_afac7f21b84a613f3aac3cd9f11a08654"><div class="ttname"><a href="classpolydaq2.html#afac7f21b84a613f3aac3cd9f11a08654">polydaq2::get_IR_temperature</a></div><div class="ttdeci">uint16_t get_IR_temperature(void)</div><div class="ttdoc">Query the MLX90614 infrared thermometer for a temperature reading. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00541">polydaq2.cpp:541</a></div></div>
<div class="ttc" id="classpolydaq2_html_a42de5e039a7715870237630a2d7ba608"><div class="ttname"><a href="classpolydaq2.html#a42de5e039a7715870237630a2d7ba608">polydaq2::scan_I2C_bus</a></div><div class="ttdeci">void scan_I2C_bus(emstream *p_ser_pt)</div><div class="ttdoc">Check all possible addresses on the I2C bus for sensors. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00269">polydaq2.h:269</a></div></div>
<div class="ttc" id="classpolydaq2_html_a957565a13f1ac71238b0c13ba7b107f9"><div class="ttname"><a href="classpolydaq2.html#a957565a13f1ac71238b0c13ba7b107f9">polydaq2::strain_raw</a></div><div class="ttdeci">int16_t strain_raw(uint8_t channel)</div><div class="ttdoc">Get a raw A/D reading from a strain gauge amplifier. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8cpp_source.html#l00171">polydaq2.cpp:171</a></div></div>
<div class="ttc" id="classpolydaq2_html_aee8448f01c2acd373be480492e99a214"><div class="ttname"><a href="classpolydaq2.html#aee8448f01c2acd373be480492e99a214">polydaq2::get_prev_DAC_output</a></div><div class="ttdeci">uint16_t get_prev_DAC_output(uint8_t channel)</div><div class="ttdoc">Get the value most recently sent to the given D/A channel. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00238">polydaq2.h:238</a></div></div>
<div class="ttc" id="classpolydaq2_html_ada5828197e8746b385b6461d0a924d42"><div class="ttname"><a href="classpolydaq2.html#ada5828197e8746b385b6461d0a924d42">polydaq2::set_accel_range</a></div><div class="ttdeci">void set_accel_range(mma8452q_range_t range)</div><div class="ttdoc">Set the accelerometer&#39;s range to +/-2, +/-4, or +/-8 g&#39;s. </div><div class="ttdef"><b>Definition:</b> <a href="polydaq2_8h_source.html#l00257">polydaq2.h:257</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 11 2015 12:43:10 for PolyDAQ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
