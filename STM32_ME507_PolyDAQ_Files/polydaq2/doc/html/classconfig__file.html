<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>PolyDAQ: config_file Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PolyDAQ
   &#160;<span id="projectnumber">2.1</span>
   </div>
   <div id="projectbrief">Cal Poly ME Data Acquisition and Logging System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classconfig__file-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">config_file Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Base class for a configuration file reader and parser.  
 <a href="classconfig__file.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="config__file_8h_source.html">config_file.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac2724c3ca140fd2932cb956d0f06e315"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconfig__file.html#ac2724c3ca140fd2932cb956d0f06e315">config_file</a> (sd_card *p_sd_card, emstream *p_ser_dev)</td></tr>
<tr class="memdesc:ac2724c3ca140fd2932cb956d0f06e315"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for a base configuration file parser.  <a href="#ac2724c3ca140fd2932cb956d0f06e315">More...</a><br/></td></tr>
<tr class="separator:ac2724c3ca140fd2932cb956d0f06e315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55798c93bc529cfa7d79e199f1ad7925"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconfig__file.html#a55798c93bc529cfa7d79e199f1ad7925">read</a> (char const *)</td></tr>
<tr class="memdesc:a55798c93bc529cfa7d79e199f1ad7925"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a configuration file, parsing each line to find settings.  <a href="#a55798c93bc529cfa7d79e199f1ad7925">More...</a><br/></td></tr>
<tr class="separator:a55798c93bc529cfa7d79e199f1ad7925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0c5fee1c2a104dd501f4499b526b184"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconfig__file.html#aa0c5fee1c2a104dd501f4499b526b184">skip_to_next_line</a> (void)</td></tr>
<tr class="memdesc:aa0c5fee1c2a104dd501f4499b526b184"><td class="mdescLeft">&#160;</td><td class="mdescRight">Skip whitespace characters and comments until data is found.  <a href="#aa0c5fee1c2a104dd501f4499b526b184">More...</a><br/></td></tr>
<tr class="separator:aa0c5fee1c2a104dd501f4499b526b184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05bfc7892289bec6441710bf7f2c092b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconfig__file.html#a05bfc7892289bec6441710bf7f2c092b">skip_to_EOL</a> (void)</td></tr>
<tr class="memdesc:a05bfc7892289bec6441710bf7f2c092b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Skip from a comment delimiter character to the end of a line.  <a href="#a05bfc7892289bec6441710bf7f2c092b">More...</a><br/></td></tr>
<tr class="separator:a05bfc7892289bec6441710bf7f2c092b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a672af5504446db5f89896aada5980468"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconfig__file.html#a672af5504446db5f89896aada5980468">read_bool</a> (uint16_t)</td></tr>
<tr class="memdesc:a672af5504446db5f89896aada5980468"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read one boolean value from a configuration file.  <a href="#a672af5504446db5f89896aada5980468">More...</a><br/></td></tr>
<tr class="separator:a672af5504446db5f89896aada5980468"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a7f5e8d1a7a4b760531853d43857fc527"><td class="memItemLeft" align="right" valign="top">sd_card *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconfig__file.html#a7f5e8d1a7a4b760531853d43857fc527">p_card</a></td></tr>
<tr class="memdesc:a7f5e8d1a7a4b760531853d43857fc527"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the SD card driver.  <a href="#a7f5e8d1a7a4b760531853d43857fc527">More...</a><br/></td></tr>
<tr class="separator:a7f5e8d1a7a4b760531853d43857fc527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a529cb0760d01190b93076cb9e7da4746"><td class="memItemLeft" align="right" valign="top">emstream *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconfig__file.html#a529cb0760d01190b93076cb9e7da4746">p_serial</a></td></tr>
<tr class="memdesc:a529cb0760d01190b93076cb9e7da4746"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a serial device used for debugging messages.  <a href="#a529cb0760d01190b93076cb9e7da4746">More...</a><br/></td></tr>
<tr class="separator:a529cb0760d01190b93076cb9e7da4746"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class for a configuration file reader and parser. </p>
<p>This class parses a configuration file which is kept on some type of serially accessed device such as an SD card. The configuration file is made up in sections, with sections being indicated by a text header in brackets; the file contains items which map to variables that will be kept in the configuration, generally numbers and flags (boolean values) and, in the future, perhaps text strings and comments. The items are distinguished as follows: </p>
<ul>
<li>Comments are put in the file line by line; they begin with a number sign (<code>#</code>). When a number sign is found, the rest of the line is ignored. A comment may be on a line after a data item. </li>
<li>Numbers are expected to be integers (floats may be supported in the future). They are given one per line. It's OK to have comments after the numbers. </li>
<li>Boolean values can be given as text which begins with <code>Y</code>, <code>y</code>, <code>T</code>, <code>t</code>, or <code>On</code> for values which are true; <code>N</code>, <code>n</code>, <code>F</code>, <code>f</code>, and <code>Off</code> represent false values.</li>
</ul>
<p>An example file looks like the following: </p>
<div class="fragment"><div class="line"><span class="preprocessor"># Sample configuration file</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># This comment explains something really important.</span></div>
<div class="line"><span class="preprocessor"></span>157            # Numerator</div>
<div class="line">100            # Denominator</div>
<div class="line">-13            # Offset</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># End of file</span></div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="config__file_8h_source.html#l00094">94</a> of file <a class="el" href="config__file_8h_source.html">config_file.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac2724c3ca140fd2932cb956d0f06e315"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">config_file::config_file </td>
          <td>(</td>
          <td class="paramtype">sd_card *&#160;</td>
          <td class="paramname"><em>p_sd_card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">emstream *&#160;</td>
          <td class="paramname"><em>p_ser_dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for a base configuration file parser. </p>
<p>This constructor creates the base class portion of a configuration file parser which reads files on a given serial decice. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_sd_card</td><td>Pointer to a device such as an SD card on which the file is kept </td></tr>
    <tr><td class="paramname">p_ser_dev</td><td>Serial device (such as a port) on which to show debugging information </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config__file_8cpp_source.html#l00045">45</a> of file <a class="el" href="config__file_8cpp_source.html">config_file.cpp</a>.</p>

<p>References <a class="el" href="config__file_8h_source.html#l00101">p_card</a>, and <a class="el" href="config__file_8h_source.html#l00108">p_serial</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a55798c93bc529cfa7d79e199f1ad7925"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void config_file::read </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>file_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read a configuration file, parsing each line to find settings. </p>
<p>This is a base class method to read a configuration file. It only reads and prints out the file, if debugging is properly enabled. Descendent classes need to implement their own versions of <code><a class="el" href="classconfig__file.html#a55798c93bc529cfa7d79e199f1ad7925" title="Read a configuration file, parsing each line to find settings. ">read()</a></code> which are appropriate for configurations of specific systems. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name</td><td>Pointer to a string containing the name of the file to be read </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config__file_8cpp_source.html#l00064">64</a> of file <a class="el" href="config__file_8cpp_source.html">config_file.cpp</a>.</p>

<p>References <a class="el" href="config__file_8h_source.html#l00059">CFGF_DBG</a>, and <a class="el" href="config__file_8h_source.html#l00101">p_card</a>.</p>

</div>
</div>
<a class="anchor" id="a672af5504446db5f89896aada5980468"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t config_file::read_bool </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>a_char</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read one boolean value from a configuration file. </p>
<p>This method reads a Boolean value from the configuration file. The value may be represented by various symbols; anything beginning with <code></code>[YyTt] is taken as meaning true; anything beginning with <code></code>[NnFf] is taken as false; if the first letter is <code></code>[Oo] then the second letter is checked, as we've probably got <code>On</code> or <code>Off</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a_char</td><td>The first character of the item, often found by <a class="el" href="classconfig__file.html#aa0c5fee1c2a104dd501f4499b526b184" title="Skip whitespace characters and comments until data is found. ">skip_to_next_line()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for false, 1 for true, and 0xFF for undetermined (not a valid Boolean) </dd></dl>

<p>Definition at line <a class="el" href="config__file_8cpp_source.html#l00171">171</a> of file <a class="el" href="config__file_8cpp_source.html">config_file.cpp</a>.</p>

<p>References <a class="el" href="config__file_8h_source.html#l00101">p_card</a>.</p>

</div>
</div>
<a class="anchor" id="a05bfc7892289bec6441710bf7f2c092b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void config_file::skip_to_EOL </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Skip from a comment delimiter character to the end of a line. </p>
<p>This method is called when a comment character has been found. It reads and ignores all characters up to the end of the current line. The file pointer is moved forward in the file, but nothing else is changed. </p>

<p>Definition at line <a class="el" href="config__file_8cpp_source.html#l00151">151</a> of file <a class="el" href="config__file_8cpp_source.html">config_file.cpp</a>.</p>

<p>References <a class="el" href="config__file_8h_source.html#l00048">CFG_END_OF_LINE</a>, and <a class="el" href="config__file_8h_source.html#l00101">p_card</a>.</p>

<p>Referenced by <a class="el" href="config__file_8cpp_source.html#l00102">skip_to_next_line()</a>.</p>

</div>
</div>
<a class="anchor" id="aa0c5fee1c2a104dd501f4499b526b184"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t config_file::skip_to_next_line </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Skip whitespace characters and comments until data is found. </p>
<p>This method reads characters, skipping whitespace (spaces and returns) and ignoring lines which are comments, until it has found the first character on the next active (non-comment) line. That first character is returned, and the file pointer is left pointing to the character after that first character. </p>
<dl class="section return"><dt>Returns</dt><dd>The first non-comment character found, or (-1) if error or end of file </dd></dl>

<p>Definition at line <a class="el" href="config__file_8cpp_source.html#l00102">102</a> of file <a class="el" href="config__file_8cpp_source.html">config_file.cpp</a>.</p>

<p>References <a class="el" href="config__file_8h_source.html#l00043">CFG_COMMENT_CHAR</a>, <a class="el" href="config__file_8h_source.html#l00048">CFG_END_OF_LINE</a>, <a class="el" href="config__file_8h_source.html#l00101">p_card</a>, and <a class="el" href="config__file_8cpp_source.html#l00151">skip_to_EOL()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a7f5e8d1a7a4b760531853d43857fc527"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sd_card* config_file::p_card</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A pointer to the SD card driver. </p>
<p>This pointer points to the SD card driver which is used to access the configuration file. </p>

<p>Definition at line <a class="el" href="config__file_8h_source.html#l00101">101</a> of file <a class="el" href="config__file_8h_source.html">config_file.h</a>.</p>

<p>Referenced by <a class="el" href="config__file_8cpp_source.html#l00045">config_file()</a>, <a class="el" href="config__file_8cpp_source.html#l00064">read()</a>, <a class="el" href="config__file_8cpp_source.html#l00171">read_bool()</a>, <a class="el" href="config__file_8cpp_source.html#l00151">skip_to_EOL()</a>, and <a class="el" href="config__file_8cpp_source.html#l00102">skip_to_next_line()</a>.</p>

</div>
</div>
<a class="anchor" id="a529cb0760d01190b93076cb9e7da4746"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">emstream* config_file::p_serial</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to a serial device used for debugging messages. </p>
<p>This pointer points to a serial port which can be used for debugging. If left at <code>NULL</code>, debugging printouts won't take place. </p>

<p>Definition at line <a class="el" href="config__file_8h_source.html#l00108">108</a> of file <a class="el" href="config__file_8h_source.html">config_file.h</a>.</p>

<p>Referenced by <a class="el" href="config__file_8cpp_source.html#l00045">config_file()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="config__file_8h_source.html">config_file.h</a></li>
<li><a class="el" href="config__file_8cpp_source.html">config_file.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 11 2015 12:43:10 for PolyDAQ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
